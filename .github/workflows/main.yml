name: cd

on:
  push:
    branches:
      - dev

jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: executing remote ssh commands using password
      uses: appleboy/ssh-action@v0.1.10
      with:
        host: 203.161.53.80
        username: root
        password: Majj@clinic2023
        port: 22
        script: |
            cd ~/frontend/dev/majja
            git pull origin dev
            git status
            sudo docker rm frontend_container_dev -f
            sudo docker rmi frontend_dev
            sudo docker build . --no-cache -t frontend_dev
            sudo docker run --name frontend_container_dev --restart always --network containers_lan -p 80:3000 -p 443:3000 -d frontend_dev
            sudo systemctl stop docker
            sudo systemctl start docker
